<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>Bình Yên Nơi Làng Quê</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f4f6f8; }
        .container { background: #fff; padding: 32px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); max-width: 600px; margin: auto; }
        h1, #title-edit {
          color: #2e7d32;
          font-weight: bold;
        }
        .image { display: block; margin: 0 auto 12px auto; max-width: 420px; border-radius: 10px; }
        .btn-group {
          text-align: center;
          margin-bottom: 24px;
        }
        .btn {
          padding: 10px 20px;
          background: #2e7d32;
          color: #fff;
          border: none;
          border-radius: 6px;
          font-size: 16px;
          cursor: pointer;
          margin: 0 8px;
          transition: background 0.2s;
        }
        .btn:hover {
          background: #1b5e20;
        }
        input#title-edit {
          width: 100%;
          font-size: 24px;
          padding: 10px;
          border-radius: 8px;
          border: 2px solid #2e7d32;
          box-sizing: border-box;
          margin-bottom: 12px;
          background-color: #e8f5e9;
          transition: border-color 0.3s ease;
        }
        input#title-edit:focus {
          border-color: #1b5e20;
          outline: none;
          background-color: #c8e6c9;
        }
        textarea {
          width: 100%;
          min-height: 220px;
          font-size: 16px;
          padding: 12px;
          border-radius: 8px;
          border: 1px solid #ccc;
          resize: vertical;
          box-sizing: border-box;
          margin-bottom: 12px;
          font-family: Arial, sans-serif;
        }
        #status {
          margin-top: 8px;
          color: #555;
          font-style: italic;
          text-align: right;
          font-size: 14px;
        }
        a.back-btn {
          display: inline-block;
          margin-top: 24px;
          padding: 10px 26px;
          background: #2e7d32;
          color: #fff;
          border-radius: 6px;
          text-decoration: none;
          font-size: 16px;
          cursor: pointer;
          transition: background 0.2s;
        }
        a.back-btn:hover {
          background: #1b5e20;
        }
        /* Nút "Cải thiện nội dung" có màu cam nổi bật */
        .btn.improve-btn {
          background: #f57c00;
          margin-left: 8px;
        }
        .btn.improve-btn:hover {
          background: #ef6c00;
        }
    </style>
</head>
<body>
    <div class="container">
        <img class="image" src="https://images.pexels.com/photos/34072/pexels-photo.jpg" alt="Bình yên nơi làng quê">

        <div class="btn-group">
          <button id="save-btn" class="btn">Lưu ngay</button>
          <button id="load-btn" class="btn">Tải lên</button>
          <button id="improve-btn" class="btn improve-btn">Cải thiện nội dung</button>
        </div>

        <input id="title-edit" type="text" spellcheck="false" />
        <textarea id="editable-content" spellcheck="false"></textarea>
        <div id="status">Chưa lưu</div>
        <a href="/index.html" class="back-btn">Quay lại</a>
    </div>

<script>
  const textarea = document.getElementById('editable-content');
  const titleEdit = document.getElementById('title-edit');
  const status = document.getElementById('status');
  const pageTitle = document.querySelector('title');

  const saveBtn = document.getElementById('save-btn');
  const loadBtn = document.getElementById('load-btn');
  const improveBtn = document.getElementById('improve-btn');

  const defaultContent = `Làng quê – nơi những ký ức tuổi thơ được ươm mầm, nơi thời gian dường như trôi chậm lại giữa hương lúa, tiếng chim và những buổi chiều yên ả.

Giữa sự hối hả của thành thị, vẻ đẹp bình dị của làng quê khiến lòng người lắng lại. Những mái nhà nhỏ bên con đường đất, cây đa đầu làng, bãi cỏ xanh và dòng sông lặng lẽ… tất cả tạo nên một khung cảnh thân thương và gần gũi.

Trở về với làng quê không chỉ là về với đất mẹ, mà còn là trở về với chính mình – nơi nuôi dưỡng tâm hồn bằng sự giản đơn, chân thành và bình yên.`;

  const defaultTitle = "Bình Yên Nơi Làng Quê";

  // Load dữ liệu từ localStorage hoặc mặc định
  function loadData() {
    const savedContent = localStorage.getItem('autosaveContent');
    const savedTitle = localStorage.getItem('autosaveTitle');
    textarea.value = savedContent || defaultContent;
    titleEdit.value = savedTitle || defaultTitle;
    pageTitle.textContent = titleEdit.value;
    status.textContent = 'Đã tải dữ liệu lúc: ' + new Date().toLocaleTimeString();
  }
  loadData();

  // Lưu dữ liệu vào localStorage và cập nhật title tab
  function saveData() {
    localStorage.setItem('autosaveContent', textarea.value);
    localStorage.setItem('autosaveTitle', titleEdit.value);
    pageTitle.textContent = titleEdit.value;
    status.textContent = 'Đã lưu lúc: ' + new Date().toLocaleTimeString();
  }

  // Lưu tự động sau 3 giây không gõ
  let timer = null;
  function autoSave() {
    status.textContent = 'Đang soạn...';
    clearTimeout(timer);
    timer = setTimeout(saveData, 3000);
  }
  textarea.addEventListener('input', autoSave);
  titleEdit.addEventListener('input', autoSave);

  // Xử lý nút Lưu ngay
  saveBtn.addEventListener('click', () => {
    saveData();
  });

  // Xử lý nút Tải lên
  loadBtn.addEventListener('click', () => {
    loadData();
  });

  // Xử lý nút Cải thiện nội dung
  improveBtn.addEventListener('click', () => {
    let text = textarea.value.trim();
    if (!text) {
      alert('Vui lòng nhập nội dung trước khi cải thiện.');
      return;
    }
    // Viết hoa chữ cái đầu mỗi câu, tách bằng dấu chấm
    let sentences = text.split('.').map(s => s.trim()).filter(s => s.length > 0);
    sentences = sentences.map(s => s.charAt(0).toUpperCase() + s.slice(1));
    let improved = sentences.join('. ') + '.\n\nNội dung đã được cải thiện để rõ ràng hơn.';
    textarea.value = improved;
    status.textContent = 'Nội dung đã được cải thiện!';
    saveData();
  });
</script>
</body>
</html>
